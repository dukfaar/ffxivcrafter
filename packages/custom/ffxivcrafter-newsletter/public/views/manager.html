<page-base
  ngf-drop="newsletterManagerController.FileUpload.uploadFiles($files)"
  ngf-accept="'application/pdf'"
  ngf-pattern="'application/pdf'"
  ngf-multiple="true"
  layout-fill
  layout="column">
  <div layout-padding>
    <div ng-if="newsletterManagerController.FileUpload.uploadData.filesToUpload > 0">
      <md-progress-linear
        md-mode="determinate"
        value="{{newsletterManagerController.FileUpload.uploadData.fileProgress}}">
      </md-progress-linear>
      <md-progress-linear
        md-mode="determinate"
        value="{{newsletterManagerController.FileUpload.uploadData.totalProgress}}">
      </md-progress-linear>
    </div>

    <div layout="row" layout-wrap>
      <md-card ng-repeat="newsletter in newsletterManagerController.newsletterList track by newsletter._id">
        <md-card-content layout="column">
          <md-input-container>
            <label>Title</label>
            <input type="text" ng-model="newsletter.title" ng-change="newsletterManagerController.updateNewsletter(newsletter)"/>
          </md-input-container>
          <span>{{newsletter.uploadDate|date: 'short'}}</span>
          <span>uploaded by {{newsletterManagerController.UserDatabase.get(newsletter.uploader).name}}</span>
          <md-switch
            ng-model="newsletter.isCurrent"
            ng-change="newsletterManagerController.updateNewsletter(newsletter)">
            {{newsletter.isCurrent?'displayed as the current newsletter':'not the current newsletter'}}
          </md-switch>
        </md-card-content>
      </md-card>
    </div>
  </div>
</page-base>
