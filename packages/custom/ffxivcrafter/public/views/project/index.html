<div ng-controller="ProjectController" flex>
  <main style="overflow:auto">
    <div flex>
      <md-content layout-wrap>
        <md-tabs md-dynamic-height md-border-bottom md-selected="tabdata.selectedIndex">
          <md-tab md-on-select="selectedProject(project)" ng-repeat="project in projectList" label="{{project.tree.item.name}}">
            <md-content layout="row" layout-wrap ng-if="projectData[project._id]">
              <md-card>
                <md-card-content>
                  <project-step data-step="project.tree" update-step="updateStep" price-update='priceUpdate'></project-step>
                </md-card-content>
              </md-card>

              <project-item-stock></project-item-stock>

              <project-item-gathers></project-item-gathers>

              <project-item-crafts></project-item-crafts>

              <span layout="column">
                <revenue-card project="project" project-data="projectData[project._id]"></revenue-card>

                <md-card>
                  <md-card-content>
                    <span>Project created By {{project.creator.name}}</span>
                    <md-switch ng-model="project.public" ng-change="updateProject(project)">{{project.public?'public':'non-public'}} project</md-switch>

                    <md-button ng-click="deleteProject(project)" class="md-raised">Delete Project</md-button>
                  </md-card-content>
                </md-card>

                <md-card>
                  <md-card-header>
                    <md-card-header-text class="md-title">
                      Comment
                    </md-card-header-text>
                  </md-card-header>
                  <md-card-content>
                    {{project.comment}}
                  </md-card-content>
                </md-card>
              </span>

            </md-content>
          </md-tab>
        </md-tabs>
      </md-content>
    </div>
  </main>
</div>

<style>
.stepList {
  padding:0.5em 0 0.5em 0.5em;
}

.step select {
  border:0;
}
</style>
