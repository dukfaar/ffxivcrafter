<div ng-controller="CraftingReportingController" flex>
  <main style="overflow:auto">
    <div flex>
      <md-content layout="row" layout-wrap>
        <md-card>
          <md-card-content>
            <table>

              <tr>
                <td></td>
                <td><md-input-container>
                  <label>Item Filter</label>
                  <input ng-model="logFilter.itemNameFilter" ng-change="refilterLog()"></input>
                </md-input-container></td>
                <td>
                  <md-input-container>
                    <label>Submitter Filter</label>
                    <input ng-model="logFilter.submitterNameFilter" ng-change="refilterLog()"></input>
                  </md-input-container></td>
                <td>
                  <md-input-container>
                    <label>Project Filter</label>
                    <input ng-model="logFilter.projectNameFilter" ng-change="refilterLog()"></input>
                  </md-input-container></td>
                </td>
                <td></td>
              </tr>

              <tr ng-repeat="logItem in filteredLog | orderBy: date: true | limitTo:logFilter.numLogItems:logFilter.beginLogItems">
                <td>{{logItem.amount}}</td>
                <td>{{logItem.item.name}} <span ng-if="logItem.hq">HQ</span></td>
                <td>{{logItem.submitter.name}}</td>
                <td>{{logItem.project?logItem.project.name:logItem.deletedProjectName}}</td>
                <td>{{logItem.date}}</td>
              </tr>

            </table>

            <div layout="row">
              <md-button class="md-primary md-raised" ng-disabled="logFilter.beginLogItems < logFilter.numLogItems" ng-click="logFilter.beginLogItems = logFilter.beginLogItems - logFilter.numLogItems">Prev 10</md-button>
              <md-button class="md-primary md-raised" ng-disabled="logFilter.beginLogItems > (filteredLog.length - logFilter.numLogItems)" ng-click="logFilter.beginLogItems = logFilter.beginLogItems + logFilter.numLogItems">Next 10</md-button>
            </div>
          </md-card-content>
        </md-card>

        <reporting-activity-chart log='filteredLog'></reporting-activity-chart>

        <reporting-user-activity-chart log='filteredLog'></reporting-user-activity-chart>

        <reporting-tod-activity-chart log='filteredLog'></reporting-tod-activity-chart>

        <reporting-dow-activity-chart log='filteredLog'></reporting-dow-activity-chart>

        <reporting-user-contribution-chart log='filteredLog'></reporting-user-contribution-chart>

        <reporting-involved-items log='filteredLog'></reporting-involved-items>
      </md-content>
    </div>
  </main>
</div>
