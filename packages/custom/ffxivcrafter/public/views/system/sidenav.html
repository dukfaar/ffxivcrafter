<div layout="column" ng-controller="HeaderController as hdrctr" layout-fill>
  <h2 style="text-align: center">RainCollector</h2>
  <md-button layout="row" class="md-button" aria-label="{{item.link}}" ui-route="/{{item.link}}" ng-class="{active: $uiRoute}" ng-repeat="item in hdrctr.menus.main" ui-sref="{{item.link}}" mean-token="item.link" ng-click="closeMainSideNav()">
    <span flex></span>
    <span>{{item.title}}</span>
  </md-button>
  <span flex></span>
  <md-button class="md-button" aria-label="Sign Up" ui-sref="auth.register" ng-if="!hdrctr.hdrvars.authenticated">
    Join
  </md-button>
  <md-button class="md-button" aria-label="Login" ui-sref="auth.login" ng-if="!hdrctr.hdrvars.authenticated">
    Login
  </md-button>

  <div layout="row">
    <span flex></span>
    <md-menu ng-if="hdrctr.hdrvars.authenticated" md-position-mode="target-right target">
      <md-button aria-label="Account" class="md-button top-link" ng-click="$mdOpenMenu()">
        <md-tooltip md-direction="left">Account Settings</md-tooltip>
        <md-icon>account_box</md-icon>
        <span id="toolbar-username">{{hdrctr.hdrvars.user.name}}</span>
        <md-icon md-menu-origin>keyboard_arrow_down</md-icon>
      </md-button>

      <md-menu-content>
        <md-menu-item ui-route="/{{item.link}}" ng-class="{active: $uiRoute}" ng-repeat="item in hdrctr.menus.account">
            <md-button mean-token="item.link" ui-sref='{{item.link}}'>
              {{item.title}}
            </md-button>
        </md-menu-item>
        <md-menu-item ng-show="allowed('admin')">
          <md-button href="#" ng-click="openAdminPanel()">Open Admin Panel</md-button>
        </md-menu-item>

        <md-menu-item>
          <md-button class="md-button" aria-label="Logout" ng-click="hdrctr.logout()">
            <md-icon>exit_to_app</md-icon>
            Logout
          </md-button>
        </md-menu-item>
      </md-menu-content>
    </md-menu>
  </div>
</div>
