<main ng-controller="CraftingController" flex style="overflow:auto">
  <div flex>
    <md-content layout="row" layout-fill>
      <md-card>
        <md-card-content>
          <md-input-container md-no-float>
            <input ng-model="filter" ng-change="updateList()" ng-model-options="{debounce:300}" placeholder="Search"></input>
          </md-input-container>
          <md-list>
            <md-list-item ng-repeat="item in itemList" ng-click="selectItem(item)">
              {{item.name}}
            </md-list-item>
          </md-list>
        </md-card-content>
      </md-card>

      <md-card>
          <md-card-content ng-show="selectedItem">
            <h3>{{selectedItem.name}}</h3>
            <div>
              <span>Max revenue:</span>
              <span>{{craftingData.tree.item.price*0.95}}</span>
            </div>
            <div>
              <span>Total Price of ItemList:</span>
              <span>{{craftingData.materialPrice}}</span>
            </div>
            <div>
              <span>Profit if crafted from base materials (5% taxes included):</span>
              <span ng-style="{color: craftingData.tree.item.price-craftingData.materialPrice>0?'green':'red'}">{{craftingData.tree.item.price*0.95-craftingData.materialPrice}}</span>
            </div>
            <div>
              <span>Total Effort of ItemList:</span>
              <span>{{craftingData.materialEffort}}</span>
            </div>
          </md-card-content>

          <md-card-actions ng-show="selectedItem">
            <md-button class="md-raised" ng-click="projectFromItem(selectedItem)">Add as project</md-button>
          </md-card-actions>
      </md-card>

      <md-card>
          <md-card-content ng-show="selectedItem">
            <h3>Crafting Tree</h3>
              <crafting-tree-item data-tree="craftingData.tree"></crafting-tree-item>
          </md-card-content>
      </md-card>

      <md-card>
          <md-card-content ng-show="selectedItem">
            <h3>ItemList</h3>
              <md-list>
                <md-list-item ng-repeat="item in craftingData.materialList" layout="row" layout-fill>
                  <div flex>{{item.item.name}}</div><div>{{item.amount}}</span>
                </md-list-item>
              </md-list>
          </md-card-content>
      </md-card>
    </md-content>
  </div>
</main>
