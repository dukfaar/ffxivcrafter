<md-content layout-fill>
  <div layout="row" layout-xs="column" layout-sm="column" layout-fill>
    <div layout="column" flex>
        <h1 layout="row" layout-align="center center">{{accountProfileController.profileUser.name}}</h1>

        <md-tabs layout-fill>
          <md-tab label="General" >
            <div layout="column">
              <md-card>
                <md-card-content layout="column" layout-padding>
                  <div style="white-space:pre-wrap;" ng-bind-html="accountProfileController.profileUser.aboutme|kanbanText">
                  </div>
                </md-card-content>
              </md-card>

              <div layout="row" layout-xs="column" layout-sm="column">
                <div flex>
                  <md-card>
                    <md-card-header>
                      Latest Forum Posts
                    </md-card-header>
                    <md-card-content>
                      <div ng-repeat="post in accountProfileController.latestForumPosts track by post._id">
                        <div layout-padding style="white-space:pre-wrap;" ng-bind-html="post.text|kanbanText">
                        </div>
                        <md-divider ng-if="!$last"></md-divider>
                      </div>
                    </md-card-content>
                  </md-card>
                </div>

                <div flex>
                  <md-card>
                    <md-card-header>
                      Latest Gallery Images
                    </md-card-header>
                    <md-card-content>
                      <md-grid-list ng-if="accountProfileController.$mdMedia('gt-sm')" md-cols="3" md-gutter="0.5em" md-row-height="1:1">
                        <md-grid-tile ng-repeat="image in accountProfileController.latestImages track by image._id">
                          <img
                            style="max-width:100%; max-height:100%;"
                            ng-src="/api/imageThumbnailData/{{image._id}}"/>
                        </md-grid-tile>
                      </md-grid-list>

                      <md-list ng-if="!accountProfileController.$mdMedia('gt-sm')">
                        <md-list-item ng-repeat="image in accountProfileController.latestImages track by image._id">
                          <img
                            style="max-width:100%; max-height:100%; min-width:100%;"
                            ng-src="/api/imageThumbnailData/{{image._id}}"/>
                        </md-list-item>
                      </md-list>
                    </md-card-content>
                  </md-card>
                </div>
              </div>
            </div>
          </md-tab>
          <md-tab label="Character">
            <md-card>
              <md-card-content>
                <div style="display:table" layout-fill>
                  <md-slider-container
                  style="display:table-row"
                    ng-repeat="job in [
                      'scholar', 'whitemage', 'astrologian',
                      'paladin', 'warrior', 'darkknight',
                      'ninja', 'monk', 'dragoon',
                      'blackmage', 'summoner', 'machinist', 'bard'
                    ]">
                    <div translate="job.{{job}}.label" style="display:table-cell"></div>
                    <md-slider
                      layout-padding
                      style="display:table-cell"
                      md-discrete
                      ng-readonly="true"
                      ng-disabled="true"
                      ng-model="accountProfileController.userCombatClasses[job + 'Level']"
                      min="0"
                      max="60"
                      >
                    </md-slider>
                  </md-slider-container>
                </div>
              </md-card-content>
            </md-card>
          </md-tab>
        </md-tabs>
    </div>

    <div layout="column">
      <md-card ng-if="accountProfileController.profileUser.avatarImage && accountProfileController.profileUser.avatarImage.length > 0">
        <md-card-content >
          <img ng-src="/api/imageThumbnailData/{{accountProfileController.profileUser.avatarImage}}"/>
          <div ng-if="accountProfileController.birthday">
            Birthday: {{accountProfileController.birthday.birthday|date:'longDate'}}
          </div>
        </md-card-content>
      </md-card>

      <md-card>
        <md-card-content>
          Forum Posts: {{accountProfileController.forumPostCount}}
        </md-card-content>
      </md-card>

      <md-card>
        <md-card-content>
          Gallery comments: {{accountProfileController.galleryCommentCount}}
        </md-card-content>
      </md-card>
    </div>
  </div>
</md-content>
